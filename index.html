<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- SEO OPTIMIZED TITLE -->
    <title>Brother's Fast Food Manaksar | Best Burgers, Pizza & Delivery</title>
    <!-- SEO META DESCRIPTION (Crucial for search engine snippets) -->
    <meta name="description" content="Visit Brother's Fast Food in Manaksar for the best, fresh, and delicious fast food. Try our famous burgers, crispy fries, mouth-watering pizza, and shakes. Top-rated food delivery available in the Manaksar area.">
    <!-- KEYWORDS -->
    <meta name="keywords" content="Brother Fastfood Manaksar, Brother's Fast Food, Manaksar fast food, best burgers Manaksar, pizza Manaksar, fast food delivery Manaksar, local restaurant Manaksar, Brother's Fastfood menu">

    <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSl1TpjdfyTPP9znuCZM8GB44b7MwP2DyG_RA&s" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        .hero-background {
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTu28pCqiNg_7_5lf6Z3KzhYNpyCJJ0aD31AA&s');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .gradient-overlay {
            background: linear-gradient(to top, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.85));
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d3748;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #fbc531;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #e2b02e;
        }

        .cart-sidebar {
            transition: transform 0.3s ease-in-out;
        }
        .cart-sidebar.hidden {
            transform: translateX(100%);
        }
        .cart-sidebar.visible {
            transform: translateX(0);
        }

        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
        .modal.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .modal.hidden .modal-content {
            transform: translateY(-20px);
            opacity: 0;
        }
        .modal.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal.visible .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .toast {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(20px);
            left: 16px; /* Moved to left side */
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .btn-primary, .btn-secondary {
            transition: all 0.2s ease-in-out;
            user-select: none; /* Prevent text selection */
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(251, 197, 49, 0.4);
        }
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
        }

        .menu-item {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInSlideUp 0.5s ease-out forwards;
        }

        @keyframes fadeInSlideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
    <meta property="og:title" content="Brother's Fast Food – Taste That Brings Us Together">
    <meta property="og:description" content="Indulge in the finest fast food experience. Order your favorites from Brother's Fast Food today!">
    <meta property="og:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTu28pCqiNg_7_5lf6Z3KzhYNpyCJJ0aD31AA&s">
    <meta property="og:url" content="https://brothersfastfood.com">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Brother's Fast Food">
</head>
<body class="bg-gray-900 text-gray-100 font-inter min-h-screen flex flex-col">

    <div id="page-wrapper" class="flex-grow flex flex-col lg:flex-row">
        <!-- Main Content Area -->
        <div class="flex-grow">
            <header class="relative h-screen flex items-center justify-center text-center overflow-hidden">
                <div class="absolute inset-0 hero-background"></div>
                <div class="absolute inset-0 gradient-overlay"></div>
                <div class="relative z-10 p-6 max-w-4xl mx-auto">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold text-white leading-tight drop-shadow-lg animate-fade-in-down">
                        Brother’s Fast Food – <span class="text-amber-400">Taste That Brings Us Together</span>
                    </h1>
                    <p class="mt-4 text-lg sm:text-xl text-gray-200 drop-shadow-md animate-fade-in-up">
                        Quick, delicious, and made with love. Your ultimate fast food destination.
                    </p>
                    <button id="view-menu-btn" class="mt-8 px-8 py-3 bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold rounded-full shadow-lg transition duration-300 ease-in-out transform hover:scale-105 btn-primary">
                        Explore Our Menu
                    </button>
                </div>
            </header>

            <main class="container mx-auto px-4 py-16">
                <h2 class="text-4xl font-bold text-center text-amber-400 mb-12">Our Delicious Menu</h2>
                <div id="menu-items-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    <div class="col-span-full text-center py-10" id="loading-spinner">
                        <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-amber-400 mx-auto"></div>
                        <p class="mt-4 text-gray-400 text-lg">Loading menu...</p>
                    </div>
                </div>
            </main>

            <section class="container mx-auto px-4 py-16 bg-gray-800 rounded-lg shadow-xl mb-16">
                <h2 class="text-4xl font-bold text-center text-amber-400 mb-8">Contact Us</h2>
                <div class="max-w-2xl mx-auto text-center">
                    <p class="text-lg text-gray-300 mb-4">
                        <strong>Address:</strong> Manaksar, Old Post Office, Sangria Road.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-lg text-gray-300 mb-6">
                        <div>
                            <strong>Binder:</strong> <a href="tel:+919782353918" class="text-amber-400 hover:underline">9782353918</a>
                        </div>
                        <div>
                            <strong>Kuldeep:</strong> <a href="tel:+919008767777" class="text-amber-400 hover:underline">9008767777</a>
                        </div>
                    </div>
                    <p class="text-md text-gray-400">
                        Come and enjoy our delicious fast food or give us a call today!
                    </p>
                </div>
            </section>
        </div>

        <!-- Cart Sidebar -->
        <!-- On larger screens (lg), it becomes static and takes its width within the flex row -->
        <div id="cart-sidebar" class="cart-sidebar fixed right-0 top-0 h-full w-full sm:w-80 bg-gray-800 z-40 shadow-xl p-6 flex flex-col hidden lg:static lg:block lg:flex-shrink-0 lg:ml-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-3xl font-bold text-amber-400">Your Cart</h3>
                <button id="close-cart-btn" class="lg:hidden text-gray-400 hover:text-white transition duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="cart-items" class="flex-grow overflow-y-auto pr-2 custom-scrollbar">
                <p id="empty-cart-message" class="text-gray-400 text-center py-4">Your cart is empty.</p>
            </div>
            <div class="mt-6 pt-4 border-t border-gray-700">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-lg font-semibold">Delivery Fee:</span>
                    <span id="delivery-fee" class="text-lg font-bold text-amber-400">₹0.00</span>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-semibold">Total:</span>
                    <span id="cart-total" class="text-2xl font-bold text-amber-400">₹0.00</span>
                </div>
                <button id="checkout-btn" class="w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-md shadow-lg btn-secondary" disabled>
                    Order Now
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Toggle Button (Mobile Only) -->
    <button id="cart-toggle-btn" class="fixed bottom-4 right-4 z-50 p-4 bg-red-600 rounded-full shadow-lg lg:hidden btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
        <span id="cart-count" class="absolute -top-1 -right-1 bg-amber-400 text-gray-900 text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
    </button>

    <!-- Order Modal -->
    <div id="order-modal" class="modal fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden">
        <div class="modal-content bg-gray-800 rounded-lg shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-3xl font-bold text-amber-400">Place Your Order</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white transition duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="order-form" class="space-y-4">
                <div>
                    <label for="customer-name" class="block text-gray-300 text-sm font-semibold mb-1">Name:</label>
                    <input type="text" id="customer-name" class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-amber-400" required>
                </div>
                <div>
                    <label for="customer-mobile" class="block text-gray-300 text-sm font-semibold mb-1">Mobile Number:</label>
                    <input type="tel" id="customer-mobile" class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-amber-400" placeholder="9876543210" required pattern="^\+91[0-9]{10}$" maxlength="13" value="+91">
                    <p id="mobile-error" class="text-red-400 text-sm mt-1 hidden">Please enter a valid Indian mobile number (+91XXXXXXXXXX).</p>
                </div>
                <div>
                    <label for="customer-address" class="block text-gray-300 text-sm font-semibold mb-1">Address:</label>
                    <textarea id="customer-address" rows="3" class="w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:border-amber-400" required></textarea>
                </div>
                <button type="submit" class="w-full py-3 bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold rounded-md shadow-lg btn-primary">
                    Confirm Order
                </button>
            </form>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="toast fixed bottom-4 z-50 bg-green-600 text-white py-3 px-6 rounded-md shadow-lg flex items-center space-x-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>Order successfully initiated via WhatsApp!</span>
    </div>

    <footer class="bg-gray-900 text-gray-400 py-6 text-center text-sm">
        <div class="container mx-auto px-4">
            <p>&copy; 2024 Brother's Fast Food. All rights reserved.</p>
            <p class="mt-2 flex items-center justify-center">
                website hosted & designed by
                <a href="https://t.me/lovelyakash41" target="_blank" class="ml-2 text-blue-400 hover:text-blue-300 flex items-center">
                    <i class="fa-brands fa-telegram text-xl mr-1"></i> @lovelyakash41
                </a>
            </p>
        </div>
    </footer>

    <script>
        let menuItems = [];
        let cart = {};

        const menuGrid = document.getElementById('menu-items-grid');
        const loadingSpinner = document.getElementById('loading-spinner');
        const cartSidebar = document.getElementById('cart-sidebar');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotalSpan = document.getElementById('cart-total');
        const deliveryFeeSpan = document.getElementById('delivery-fee');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const checkoutBtn = document.getElementById('checkout-btn');
        const cartToggleButton = document.getElementById('cart-toggle-btn');
        const cartCountSpan = document.getElementById('cart-count');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const orderModal = document.getElementById('order-modal');
        const orderForm = document.getElementById('order-form');
        const customerNameInput = document.getElementById('customer-name');
        const customerMobileInput = document.getElementById('customer-mobile');
        const customerAddressInput = document.getElementById('customer-address');
        const mobileError = document.getElementById('mobile-error');
        const successToast = document.getElementById('success-toast');
        const viewMenuBtn = document.getElementById('view-menu-btn');

        const BUSINESS_WHATSAPP_NUMBER = '+919782353918';
        const DELIVERY_FEE_THRESHOLD = 100;
        const BASE_DELIVERY_FEE = 20;

        async function fetchAndRenderMenu() {
            try {
                loadingSpinner.classList.remove('hidden');
                menuGrid.innerHTML = '';

                const response = await fetch('menuList.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                menuItems = await response.json();

                loadingSpinner.classList.add('hidden');

                menuItems.forEach((item, index) => {
                    const itemCard = document.createElement('div');
                    itemCard.className = `menu-item bg-gray-800 rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition duration-300 ease-in-out cursor-pointer group`;
                    itemCard.style.animationDelay = `${index * 0.05}s`;

                    itemCard.innerHTML = `
                        <div class="relative overflow-hidden h-48 sm:h-56">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-300 ease-in-out">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        </div>
                        <div class="p-5">
                            <h3 class="text-2xl font-semibold text-amber-400 mb-2">${item.name}</h3>
                            <p class="text-xl text-gray-300 mb-4">₹${item.price.toFixed(2)}</p>
                            <div class="flex items-center justify-between mb-4">
                                <span class="text-gray-400">Quantity:</span>
                                <div class="flex items-center space-x-2">
                                    <button class="quantity-minus-btn bg-red-700 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg hover:bg-red-800 transition duration-200" data-item-id="${item.id}">-</button>
                                    <span class="quantity-display text-lg font-bold w-8 text-center" id="quantity-${item.id}">1</span>
                                    <button class="quantity-plus-btn bg-red-700 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-lg hover:bg-red-800 transition duration-200" data-item-id="${item.id}">+</button>
                                </div>
                            </div>
                            <button class="add-to-cart-btn w-full py-2 bg-amber-500 hover:bg-amber-600 text-gray-900 font-bold rounded-md shadow-md transition duration-200 ease-in-out btn-primary" data-item-id="${item.id}">
                                Add to Cart
                            </button>
                        </div>
                    `;
                    menuGrid.appendChild(itemCard);
                });

                attachMenuEventListeners();

            } catch (error) {
                console.error("Failed to fetch or render menu:", error);
                menuGrid.innerHTML = `<p class="col-span-full text-center text-red-500 text-xl">Failed to load menu. Please try again later.</p>`;
                loadingSpinner.classList.add('hidden');
            }
        }

        function attachMenuEventListeners() {
            document.querySelectorAll('.quantity-plus-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    const quantityDisplay = document.getElementById(`quantity-${itemId}`);
                    let quantity = parseInt(quantityDisplay.textContent);
                    quantityDisplay.textContent = Math.min(99, quantity + 1);
                });
            });

            document.querySelectorAll('.quantity-minus-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    const quantityDisplay = document.getElementById(`quantity-${itemId}`);
                    let quantity = parseInt(quantityDisplay.textContent);
                    quantityDisplay.textContent = Math.max(1, quantity - 1);
                });
            });

            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    const quantityDisplay = document.getElementById(`quantity-${itemId}`);
                    const quantity = parseInt(quantityDisplay.textContent);
                    addToCart(itemId, quantity);
                });
            });
        }

        function addToCart(itemId, quantity) {
            const item = menuItems.find(i => i.id === itemId);
            if (!item) return;

            if (cart[itemId]) {
                cart[itemId].quantity += quantity;
            } else {
                cart[itemId] = { ...item, quantity: quantity };
            }

            renderCart();
            showToast('Item added to cart!');
        }

        function updateCartQuantity(itemId, delta) {
            if (cart[itemId]) {
                cart[itemId].quantity += delta;
                if (cart[itemId].quantity <= 0) {
                    delete cart[itemId];
                }
            }
            renderCart();
        }

        function renderCart() {
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;
            let totalItemsInCart = 0;
            const cartItemIds = Object.keys(cart);

            if (cartItemIds.length === 0) {
                emptyCartMessage.classList.remove('hidden');
                checkoutBtn.disabled = true;
            } else {
                emptyCartMessage.classList.add('hidden');
                checkoutBtn.disabled = false;
                cartItemIds.forEach(itemId => {
                    const item = cart[itemId];
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;
                    totalItemsInCart += item.quantity;

                    const cartItemDiv = document.createElement('div');
                    cartItemDiv.className = 'flex items-center justify-between bg-gray-700 rounded-md p-3 mb-3 shadow-sm';
                    cartItemDiv.innerHTML = `
                        <div class="flex-grow">
                            <p class="text-lg font-semibold text-white">${item.name}</p>
                            <p class="text-gray-400 text-sm">₹${item.price.toFixed(2)}</p>
                            <div class="flex items-center space-x-2 mt-1">
                                <button class="cart-quantity-minus-btn bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center font-bold text-sm hover:bg-red-800 transition duration-200" data-item-id="${item.id}">-</button>
                                <span class="text-base font-bold">${item.quantity}</span>
                                <button class="cart-quantity-plus-btn bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center font-bold text-sm hover:bg-red-800 transition duration-200" data-item-id="${item.id}">+</button>
                            </div>
                        </div>
                        <span class="text-lg font-bold text-amber-400 mr-4">₹${itemTotal.toFixed(2)}</span>
                        <button class="remove-from-cart-btn text-red-400 hover:text-red-500 transition duration-200" data-item-id="${item.id}">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    `;
                    cartItemsContainer.appendChild(cartItemDiv);
                });
            }

            let deliveryFee = 0;
            if (subtotal < DELIVERY_FEE_THRESHOLD && subtotal > 0) {
                deliveryFee = BASE_DELIVERY_FEE;
                deliveryFeeSpan.innerHTML = `₹${BASE_DELIVERY_FEE.toFixed(2)}`;
            } else if (subtotal >= DELIVERY_FEE_THRESHOLD) {
                deliveryFeeSpan.innerHTML = `<del class="text-gray-500 mr-1">₹${BASE_DELIVERY_FEE.toFixed(2)}</del> ₹0.00/-`;
            } else {
                deliveryFeeSpan.textContent = `₹0.00`;
            }

            const finalTotal = subtotal + deliveryFee;
            cartTotalSpan.textContent = `₹${finalTotal.toFixed(2)}`;
            cartCountSpan.textContent = totalItemsInCart.toString();

            document.querySelectorAll('.remove-from-cart-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    removeFromCart(itemId);
                });
            });

            document.querySelectorAll('.cart-quantity-plus-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    updateCartQuantity(itemId, 1);
                });
            });

            document.querySelectorAll('.cart-quantity-minus-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = parseInt(e.currentTarget.dataset.itemId);
                    updateCartQuantity(itemId, -1);
                });
            });
        }

        function removeFromCart(itemId) {
            delete cart[itemId];
            renderCart();
        }

        function toggleCartSidebar() {
            cartSidebar.classList.toggle('hidden');
            cartSidebar.classList.toggle('visible');

            // Hide the toggle button when cart is visible, show when hidden (mobile only)
            if (window.innerWidth < 1024) { // Only for screens smaller than lg
                if (cartSidebar.classList.contains('visible')) {
                    cartToggleButton.classList.add('hidden');
                } else {
                    cartToggleButton.classList.remove('hidden');
                }
            }
        }

        function showOrderModal() {
            orderModal.classList.add('visible');
            orderModal.classList.remove('hidden');
        }

        function hideOrderModal() {
            orderModal.classList.add('hidden');
            orderModal.classList.remove('visible');
            orderForm.reset();
            customerMobileInput.value = '+91'; // Reset mobile to +91 after closing
            mobileError.classList.add('hidden');
        }

        function showToast(message) {
            successToast.querySelector('span').textContent = message;
            successToast.classList.add('show');
            setTimeout(() => {
                successToast.classList.remove('show');
            }, 3000);
        }

        viewMenuBtn.addEventListener('click', () => {
            document.querySelector('main').scrollIntoView({ behavior: 'smooth' });
        });

        checkoutBtn.addEventListener('click', showOrderModal);
        closeModalBtn.addEventListener('click', hideOrderModal);
        cartToggleButton.addEventListener('click', toggleCartSidebar);
        closeCartBtn.addEventListener('click', toggleCartSidebar);

        orderModal.addEventListener('click', (e) => {
            if (e.target === orderModal) {
                hideOrderModal();
            }
        });

        customerMobileInput.addEventListener('focus', () => {
            if (customerMobileInput.value === '') {
                customerMobileInput.value = '+91';
            }
            setTimeout(() => {
                customerMobileInput.setSelectionRange(customerMobileInput.value.length, customerMobileInput.value.length);
            }, 0);
        });

        customerMobileInput.addEventListener('input', (e) => {
            let value = e.target.value;
            if (!value.startsWith('+91')) {
                value = '+91' + value.replace(/^\+91/, '').replace(/[^0-9]/g, '');
            } else {
                value = '+91' + value.substring(3).replace(/[^0-9]/g, '');
            }

            if (value.length > 13) {
                value = value.substring(0, 13);
            }
            e.target.value = value;

            const mobilePattern = /^\+91[0-9]{10}$/;
            if (!mobilePattern.test(customerMobileInput.value) && customerMobileInput.value.length === 13) {
                mobileError.classList.remove('hidden');
            } else if (customerMobileInput.value.length < 13 && customerMobileInput.value.length > 3) {
                mobileError.classList.remove('hidden');
                mobileError.textContent = 'Please enter exactly 10 digits after +91.';
            }
            else {
                mobileError.classList.add('hidden');
            }
        });

        customerMobileInput.addEventListener('blur', () => {
            if (customerMobileInput.value === '+91' || customerMobileInput.value === '') {
                customerMobileInput.value = '';
                mobileError.classList.add('hidden');
            }
            const mobilePattern = /^\+91[0-9]{10}$/;
            if (customerMobileInput.value !== '' && !mobilePattern.test(customerMobileInput.value)) {
                mobileError.classList.remove('hidden');
                mobileError.textContent = 'Please enter a valid Indian mobile number (+91XXXXXXXXXX).';
            } else if (customerMobileInput.value !== '' && mobilePattern.test(customerMobileInput.value)) {
                 mobileError.classList.add('hidden');
            }
        });

        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const customerName = customerNameInput.value.trim();
            const customerMobile = customerMobileInput.value.trim();
            const customerAddress = customerAddressInput.value.trim();

            const mobilePattern = /^\+91[0-9]{10}$/;

            if (!customerName || !customerMobile || !customerAddress) {
                showToast('Please fill in all required fields.', 'red');
                return;
            }

            if (!mobilePattern.test(customerMobile)) {
                mobileError.classList.remove('hidden');
                mobileError.textContent = 'Invalid mobile number format. (+91XXXXXXXXXX)';
                showToast('Invalid mobile number format.', 'red');
                return;
            }

            let subtotal = 0;
            Object.keys(cart).forEach(itemId => {
                const item = cart[itemId];
                subtotal += item.price * item.quantity;
            });

            let deliveryFee = 0;
            if (subtotal < DELIVERY_FEE_THRESHOLD && subtotal > 0) {
                deliveryFee = BASE_DELIVERY_FEE;
            }

            const finalTotal = subtotal + deliveryFee;

            let whatsappMessage = `Hello Brother's Fast Food, I'd like to place an order!\n\n`;
            whatsappMessage += `*Customer Details:*\n`;
            whatsappMessage += `Name: ${customerName}\n`;
            whatsappMessage += `Mobile: ${customerMobile}\n`;
            whatsappMessage += `Address: ${customerAddress}\n\n`;
            whatsappMessage += `*Order Details:*\n`;

            Object.keys(cart).forEach(itemId => {
                const item = cart[itemId];
                whatsappMessage += `- ${item.name} (Quantity: ${item.quantity}) - ₹${(item.price * item.quantity).toFixed(2)}\n`;
            });

            whatsappMessage += `\n*Total Amount (User will pay): ₹${finalTotal.toFixed(2)}*\n`;
            if (deliveryFee === 0 && subtotal >= DELIVERY_FEE_THRESHOLD) {
                whatsappMessage += `(Delivery Fee: ₹0.00/- - Free on ₹100+ order)\n`;
            } else if (deliveryFee === BASE_DELIVERY_FEE) {
                whatsappMessage += `(Delivery Fee: ₹${BASE_DELIVERY_FEE.toFixed(2)}/-)\n`;
            }
            whatsappMessage += `\nThank you!`;

            const encodedMessage = encodeURIComponent(whatsappMessage);
            const whatsappUrl = `https://wa.me/${BUSINESS_WHATSAPP_NUMBER}?text=${encodedMessage}`;

            window.open(whatsappUrl, '_blank');

            hideOrderModal();
            showToast('Your order has been successfully initiated via WhatsApp!');

            cart = {};
            renderCart();
        });

        document.addEventListener('DOMContentLoaded', () => {
            fetchAndRenderMenu();
            renderCart();
        });

        window.addEventListener('resize', () => {
            if (window.innerWidth >= 1024) {
                cartSidebar.classList.remove('hidden');
                cartSidebar.classList.add('visible');
                cartToggleButton.classList.add('hidden'); // Hide mobile toggle on desktop
            } else {
                // On mobile, if cart is visible, hide the toggle button. If hidden, show it.
                if (cartSidebar.classList.contains('visible')) {
                    cartToggleButton.classList.add('hidden');
                } else {
                    cartToggleButton.classList.remove('hidden');
                }
            }
        });

        function setInitialCartVisibility() {
            if (window.innerWidth >= 1024) {
                cartSidebar.classList.remove('hidden');
                cartSidebar.classList.add('visible');
                cartToggleButton.classList.add('hidden'); // Hide mobile toggle on desktop
            } else {
                cartSidebar.classList.add('hidden');
                cartSidebar.classList.remove('visible');
                cartToggleButton.classList.remove('hidden'); // Ensure it's visible on mobile initially
            }
        }
        setInitialCartVisibility();
    </script>
</body>
</html>
